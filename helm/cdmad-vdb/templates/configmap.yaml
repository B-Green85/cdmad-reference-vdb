apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "cdmad-vdb.fullname" . }}
  labels:
    {{- include "cdmad-vdb.labels" . | nindent 4 }}
data:
  POSTGRES_HOST: {{ include "cdmad-vdb.postgresHost" . | quote }}
  POSTGRES_PORT: {{ include "cdmad-vdb.postgresPort" . | quote }}
  POSTGRES_DB: {{ include "cdmad-vdb.postgresDatabase" . | quote }}
  POSTGRES_USER: {{ include "cdmad-vdb.postgresUser" . | quote }}
  EMBEDDING_ENDPOINT_URL: {{ required "embeddings.endpointUrl is required" .Values.embeddings.endpointUrl | quote }}
  EMBEDDING_MODEL: {{ required "embeddings.model is required" .Values.embeddings.model | quote }}
  EMBEDDING_DIMENSION: {{ .Values.embeddings.dimension | quote }}
  {{- with .Values.embeddings.responsePath }}
  EMBEDDING_RESPONSE_PATH: {{ . | quote }}
  {{- end }}
  {{- with .Values.embeddings.timeoutSeconds }}
  EMBEDDING_TIMEOUT_SECONDS: {{ . | quote }}
  {{- end }}
